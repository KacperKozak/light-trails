{"version":3,"sources":["../../../node_modules/light-trails/dist/light-trails.esm.js","../../../node_modules/light-trails-inspector/dist/light-trails-inspector.esm.js","index.ts"],"names":["FrameType","totalDuration","frames","Math","max","map","frame","startAt","duration","_arrayWithHoles","arr","Array","isArray","_iterableToArrayLimit","i","Symbol","iterator","Object","prototype","toString","call","_arr","_n","_d","_e","undefined","_i","_s","next","done","push","value","length","err","_nonIterableRest","TypeError","_slicedToArray","mapValues","object","mapFunction","fromEntries","entries","_ref","_ref2","key","limit","min","arguments","shouldSkipFrame","currentTime","currentTimeIndex","startIndex","render","type","Tween","renderer","values","val","Set","_iteratorNormalCompletion","_didIteratorError","_iteratorError","_loop","_step","n","easing","_val","off","on","_iterator","_ret","return","findTextStepTime","prevTime","prevTimeIndex","nextTime","total","Pause","nextTimeIndex","pause","end","prepareFrames","sort","a","b","prevFrame","nextFrame","lightTrails","trailFunction","options","playing","prepare","seek","time","offsetIndex","updateOnCurrent","_options$onUpdate","onUpdate","play","_options$onPlay","start","onPlay","step","requestAnimationFrame","diff","_findTextStepTime","_options$onComplete","onComplete","_options$onPause","onPause","getStatus","ended","started","__dev","_objectWithoutPropertiesLoose","source","excluded","target","sourceKeys","keys","indexOf","_objectWithoutProperties","getOwnPropertySymbols","sourceSymbolKeys","propertyIsEnumerable","selectElement","selector","element","document","querySelector","Error","concat","htmlElementRenderer","text","x","y","scale","skewX","skewY","rotate","styles","setCssValue","textContent","transform","getTransform","__EL","_values$x","_values$y","join","el","_Object$entries","_Object$entries$_i","style","setProperty","trail","operators","findRenderer","offset","operator","flat","HTMLElement","cascade","flatMap","frameFn","index","parallel","sequence","pow","sin","PI","easeInOut","easeIn","easeOut","linear","fromTo","set","delay","Delay","colorToString","color","colorFromHEX","r","parseInt","substring","g","colorFromRGB","_color$match$map","match","Number","_color$match$map2","_color$match$map2$","getColor","startsWith","_color","longHex","c1","c2","p","c","ce1","ce2","sqrt","colorChain","pref","newVal","txt","substr","suffix","valChain","_defineProperty","obj","defineProperty","enumerable","configurable","writable","bg","createBarEl","skipped","_frame$renderer","createElement","htmlPayload","tagName","title","onclick","console","log","onmouseover","outline","outlineOffset","onmouseout","opacity","height","lineHeight","fontSize","textIndent","whiteSpace","marginBottom","marginLeft","width","borderLeft","backgroundColor","borderRadius","createLineEl","position","left","top","bottom","pointerEvents","update","timeOffset","createRootEl","zIndex","fontFamily","overflow","display","gridTemplateRows","gridGap","createSeekEl","onSeek","webkitUserSelect","cursor","seeking","onmousedown","event","offsetX","onmouseup","onmousemove","round","createStatusEl","padding","status","textStatus","innerText","inspectorOptions","window","innerWidth","ownKeys","enumerableOnly","symbols","filter","sym","getOwnPropertyDescriptor","apply","_objectSpread","forEach","getOwnPropertyDescriptors","defineProperties","inspector","anim","rootEl","barsWrapperEl","statusEl","lineEl","seekEl","userOptions","_userOptions$onUpdate","_userOptions$onPause","_userOptions$onComple","maxHeight","innerHTML","appendChild","scrollIntoView","behavior","inline","block","body"],"mappings":";;;;;;AAAA,AEAA,IFAIA,AEAJ,SFAA,KEAA,GAAA,OAAA,CAAA,cAAA,CAAA;ADAA,SAASiN,eAAT,CAAyBC,GAAzB,EAA8BtK,GAA9B,EAAmCb,KAAnC,EAA0C;AACxC,ACYF,IAAA,EDZMa,GAAG,IAAIsK,GAAX,EAAgB,UCYlB,GAAA,OAAA,CAAA,wBAAA,CAAA;ADXIjM,ADAJ,CAAC,GCAGA,MAAM,CAACkM,ADAAnN,SAAV,EAAqB,GCAlB,CAAsBkN,GAAtB,EAA2BtK,GAA3B,EAAgC;AAC9Bb,ADAJ/B,AEYF,EFZEA,EEYI,EDZA+B,KAAK,ADAA,CAAC,CCACA,ACYE,GAAG,EDbkB,CDCzB,CAAT,GAAqB,OAArB,AEYgB,CAAA,UAAA,CAAW,SAAX,CAAlB;ADXMqL,ADAJpN,AEaF,EFbEA,EEaI,EDbAoN,KDAK,CAAC,EEaI,EDbA,CCaG,CDbD,CDAP,CAAT,ECFkC,CDEb,OAArB,CEaiB,CAAA,KAAA,CAAM,IAAN,EAAY,CAC3B,cAAA,CAAA,MAAA,CACI;ADdFC,ADAJrN,AEeU,EFfVA,AEeU,IDfNqN,CCeW,EAAE,EFfR,CAAC,KAAD,CCAO,ADAhB,AEe0B,CAAC,CDfT,CDAC,GCHe,EDGlC,EEe0B,CADpB;ADbFC,ADAJtN,AEeU,EFfVA,AEeU,IDfNsN,GCea,EFfR,AEeU,CFfT,ECAE,EAAE,GDAL,CAAT,GAAqB,EEeF,CAAA,GAAA,CFfnB,AEeuB,CAAJ,EAAO,CAAP;ADnBe,ADKnC,AEYO,CFjBR,AEgBI,EFXDtN,AEgBK,EDrBJ,ECgBA,CAD2B,EAQ3B,EFlBQ,YEkBR,CAAA,MAAA,CAAO,KFlBMA,SAAS,GAAG,EAAjB,CALZ;ACMG,ACiBU,EAAA,CDxBX,ICwBgB,EDjBT,ACiBW,SAAS,CAAC,SAAD;ADhBzBkN,ADAJ,AEgBW,CAAP,EAAwC,CDhBxCA,ADAAjN,GCAG,ACgBH,CDhBI2C,ACQuB,CAAZ,CAAnB,CDRO,CAAH,GAAWb,EDAE,GCAb,ADAgB7B,MAAM,IAAIC,IAAI,CAACC,GAAL,CAAS,GAAGF,MAAM,CAACG,GAAP,CAAWC,KAAK,IAAIA,KAAK,CAACC,OAAN,GAAgBD,KAAK,CAACE,QAA1C,CAAZ,CAA9B;ACCG,ACkBH,IAAM,MAAM,GAAG,cAAA,CAAA,KAAA,CAAM,QAAN,EAAgB,CAC3B,cAAA,CAAA,MAAA,CACI;AFnBR,AEoBY,EAAA,OFpBHC,AEoBU,EAAE,aFpBrB,CAAyBC,AEoBJ,CAAA,EFpBrB,CEoBqB,CFpBS,AEoBL,CAAJ,EAAO,CAAP,CADb;ADlBN,ADAA,AEoBU,EAAA,CAAC,EAAE,CFpBTC,GCAGuM,EDAE,CCAT,ADAUtM,OAAN,AEoBS,CFpBKF,AEoBL,GFpBT,AEoBS,CFpBb,AEoBiB,CAAC,CFpBM,CEoBX,EAAS,CAAT,EAAY,CFpBMA,GAAP,AEoBX;ADnBd,ADAA,AEiBO,CADJ,EAKI,IALJ,CAD2B,CAAhB,CAAf;AAUA,IAAM,SAAS,GAAG,cAAA,CAAA,KAAA,CAAM,MAAN,EAAc,CAAC,cAAA,CAAA,KAAA,CAAM,GAAN,CAAD,EAAa,cAAA,CAAA,MAAA,CAAO;ADvBpD,ADAA,AEuBsD,EAAA,EDvBlDV,KDAKa,AEuBoD,EAAE,EDvB/D,YCuB+D,CAAA,GAAA,CFvB/D,AEuBmE,CFvBpCH,AEuBgC,EAAO,CFvBtE,AEuB+D,EFvB3BI,CAApC,EAAuC;AACrC,AEsBkD,CAAP,EAA+B,GFtBtE,CEsBuC,CFtBrCC,AEsBwB,CAAd,CAAlB,IFtBc,CAACC,QAAP,IAAmBC,MAAM,CAACP,GAAD,CAAzB,IAAkCO,MAAM,CAACC,SAAP,CAAiBC,QAAjB,CAA0BC,IAA1B,CAA+BV,GAA/B,MAAwC,oBAA5E,CAAJ,EAAuG;ACCzG,ADAI,AEuBJ,CDvBC,GCuBK,ODvBKV,QCuBU,CDvBpB,EAAqB,ACuByB,EAA/C;ADtBEA,ADAC,AEwBH,EDxBEA,ECwBI,ODxBK,ACwBE,CDxBD,ECwBI,KDxBL,CAAT,GAAqB,KCwBP,CAAA,CDxBd,ECwBc,CAAI,CAAJ,EAAO,GAAP,EAAY,GAAZ,CAAhB;ADvBEA,ACyBF,EDzBEA,ECyBI,ODzBK,CAAC,GCyBK,GAAG,CDzBT,CAAT,ECyBsB,CDzBD,ACyBE,KAAL,CAAW,CDzB7B,KCyBmC,CAAC,UAAP,GAAoB,EAA/B,CAApB;ADxBEA,ADAA,ECAAA,IDAIqB,IAAI,CCAC,CAAC,CDAC,EAAX,ECAS,CAAT,GAAmB,KAAnB;AACArB,ADAA,AEyBF,EDzBEA,GCyBG,CFzBCsB,EAAE,CEyBC,CAAC,CDzBC,ADAA,CCAC,CCyBC,CAAb,CFzBE,CEyBc,CAAC,EDzBN,CAAT,ACyBkB,GDzBG,OAArB,CCyBF,EAAiC,CAAC,EAAlC,EAAsC;ADxBrC,ADAC,AEyBE,CD9BJ,EAKGtB,GDAGuB,AEyBI,EFzBF,AEyBI,GFzBD,AEyBI,CDzBH,IDAV,CCAevB,ECyBM,CAAC,MDzBE,GAAG,EAAjB,CALZ,CC8Be,CAAuB,MAAvB,CAAX;AFxBF,AEyBE,EAAA,EAAE,CAAC,CFzBDwB,EAAE,GAAGC,GEyBP,CAAa,GAAb,CAAiB,CFzBnB,MEyBE;ADxBJ,ACyBI,EAAA,EDzBAuB,ACyBE,CAAC,KAAH,CAAS,IAAT,GAAgB,CDzBD,GAAG,CAACC,ECyBI,CAAC,CAAC,IAAI,GDzBX,EAAcC,MCyBQ,GAAG,GAAd,GAAoB,CDzB/B,EAAgC5C,CCyBG,CAAC,GDzBpC,GCyB+B,EDzBW,ACyBnC,CAAF,CAAvB;ADxBF,ADAA,AE0BE,MD1BEA,ADAA,AE0BI,IAAI,CD1BH,CAACC,CC0BK,IAAI,CAAC,CD1BhB,EC0BW,CD1BK0C,AC0BI,GAAT,EAAc,IAAI,CAAC,CD1BlC,EAAiC,GC0BJ,EAAd,CAAb,CD1BsC,IAAP;AACjC,ADAE,AE2BA,EAAA,ID3BE3C,GDAG,ECAE,CAACC,CDACmB,EAAE,EE2BI,CF3BDhB,AE2BE,CD3Bd,EDAe,CAACK,AE2BlB,CACI,CD5BgBkC,IDAI,CAACjC,MCAvB,EDAe,AE4Bb,CF5BU,AE4BV,CD5B+BV,CDA9B,EAAiCqB,CE4BlC,CD5BoC,ADAxC,AE4BU,CD5B+BwB,CDAC,AE4BtC,EF5BwC7B,AE4B9B,CACN,CF7BsC,GAAG,CAACK,CCAf,CDAiB,ECAEuB,CDACxB,EAAE,CAACE,CE6BlD,CAAA,EF7B+C,EAAN,EAAiBC,AE6B1D,CACI,GD9Bd,ADA4C,CAA1C,CCAwE,CDACP,EAAE,GAAG,CCAC,GDA/E,CCAwE,CDAY;ACCtF,ADAID,AE8Bc,IAAA,EF9BdA,GCAG,CDAC,CAACS,AE8BgB,EAAE,CD9B3B,CDAI,CAAUH,EAAE,CAACI,KAAb,GE8BuB,CAAA,GAAA,CAAI,CAAJ,EAAO,IAAI,CAAC,GAAL,CAAS,IAAT,EAAe,GAAf,CAAP,CADb;AD5Bf,AC8BmB,CDlCpB,GCkCoB,CAAC,EAAE,cAAA,CAAA,GAAA,CAAI,CAAJ,EAAO,MAAM,CAAC,WAAP,GAAqB,IAAI,CAAC,MAAL,EAA5B,EAA2C,IAA3C,CAFP;AF3BV,AE8Bc,IAAA,KAAK,CF9BfjB,CAAC,AE8BgB,IF9BZO,IAAI,CAACW,KE8BO,CF9BZ,AE8BY,GAAA,CAAI,CF9BAlB,AE8BJ,CF9BrB,CE8B4B,CF9BA,GE8BP;AD7B3B,ADAK,AE0BW,GADJ,CDzBRyM,CC+BY,CD/BV,ECyBM,CDzBH,ACwBS,CAAV,CADJ;ADtBF,ADAC,AEmCC,EAAA,CDnCDvN,ADND,CAME,MEmCQ,CFnCDiC,AEmCE,CDnCD,CAACqB,CDAT,CEmCA,CFnCY,AEmCE,EDnChB,GAAmB,MCmCjB,CAA0B,EDpCrB,ACoCL;ADlCF,ADAE/B,AEmCH,GDnCEvB,CDACuB,EAAE,GAAG,GCAG,CAACmC,ADAT,GCAF,GAAiB,WAFV;AAGP,ADAElC,GCADxB,CDACwB,EAAE,GAAGS,GCAG,ADAR,CCASgJ,KAAX,GAAmB,MAHZ;AAIP,ADAC,AEmCH,GDnCGjL,ADTD,SCSU,ADAA,CCAC6E,ECmCE,CAAC,EDnCd,ECmCF,CDnCqB,ACmCA,YAAA;ADvCZ,ADKL,AEkCuB,CDvC3B,ODKQ,CEkCmB,MAAM,IAAI,CAAC,MAAL,EAAN;AFjCrB,AEiCwC,CAA9C,SFjCU,CAACvD,EAAD,IAAOI,EAAE,CAAC,QAAD,CAAF,IAAgB,IAA3B,EAAiCA,EAAE,CAAC,QAAD,CAAF;ACAvC,ADCK,AEkCL,IDnCI8L,ACmCE,CFpCF,SAEU,CCDC,ECmCI,CDnCD,CAAClN,CCmCG,IDnCJ,EAAQmF,OAAR,CCmCI,CDnCagI,ACmCb,ODnCJ,ICmCI,CDnCyB,ACoC3C,cAAA,CAAA,QAAA,CAAS,C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","file":"src.77de5100.js","sourceRoot":"../src","sourcesContent":["var FrameType;\n\n(function (FrameType) {\n  FrameType[\"Pause\"] = \"Pause\";\n  FrameType[\"Delay\"] = \"Delay\";\n  FrameType[\"Set\"] = \"Set\";\n  FrameType[\"Tween\"] = \"Tween\";\n})(FrameType || (FrameType = {}));\n\nvar totalDuration = frames => Math.max(...frames.map(frame => frame.startAt + frame.duration));\n\nfunction _arrayWithHoles(arr) {\n  if (Array.isArray(arr)) return arr;\n}\n\nfunction _iterableToArrayLimit(arr, i) {\n  if (!(Symbol.iterator in Object(arr) || Object.prototype.toString.call(arr) === \"[object Arguments]\")) {\n    return;\n  }\n\n  var _arr = [];\n  var _n = true;\n  var _d = false;\n  var _e = undefined;\n\n  try {\n    for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) {\n      _arr.push(_s.value);\n\n      if (i && _arr.length === i) break;\n    }\n  } catch (err) {\n    _d = true;\n    _e = err;\n  } finally {\n    try {\n      if (!_n && _i[\"return\"] != null) _i[\"return\"]();\n    } finally {\n      if (_d) throw _e;\n    }\n  }\n\n  return _arr;\n}\n\nfunction _nonIterableRest() {\n  throw new TypeError(\"Invalid attempt to destructure non-iterable instance\");\n}\n\nfunction _slicedToArray(arr, i) {\n  return _arrayWithHoles(arr) || _iterableToArrayLimit(arr, i) || _nonIterableRest();\n}\n\nvar mapValues = (object, mapFunction) => Object.fromEntries(Object.entries(object).map((_ref) => {\n  var _ref2 = _slicedToArray(_ref, 2),\n      key = _ref2[0],\n      value = _ref2[1];\n\n  return [key, mapFunction(value)];\n}));\nvar limit = function limit(value) {\n  var min = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 0;\n  var max = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : 1;\n  return Math.min(Math.max(value, min), max);\n};\n\nvar shouldSkipFrame = (currentTime, currentTimeIndex, frame) => {\n  if (frame.startAt > currentTime) return true;\n  if (frame.startAt === currentTime && frame.startIndex > currentTimeIndex) return true;\n  return false;\n};\n\nvar render = (currentTime, currentTimeIndex, frames) => {\n  for (var i = frames.length - 1; i >= 0; i--) {\n    var frame = frames[i];\n\n    switch (frame.type) {\n      case FrameType.Tween:\n        frame.renderer(mapValues(frame.values, val => val(0)));\n        break;\n\n      case FrameType.Set:\n        frame.renderer(mapValues(frame.values, val => val[0]));\n        break;\n    }\n  }\n\n  var _iteratorNormalCompletion = true;\n  var _didIteratorError = false;\n  var _iteratorError = undefined;\n\n  try {\n    var _loop = function _loop() {\n      var frame = _step.value;\n      if (shouldSkipFrame(currentTime, currentTimeIndex, frame)) return \"continue\";\n\n      switch (frame.type) {\n        case FrameType.Tween:\n          frame.renderer(mapValues(frame.values, val => {\n            var n = limit((currentTime - frame.startAt) / frame.duration);\n            return val(frame.easing(n));\n          }));\n          break;\n\n        case FrameType.Set:\n          frame.renderer(mapValues(frame.values, val => {\n            var _val = _slicedToArray(val, 2),\n                off = _val[0],\n                on = _val[1];\n\n            return currentTime >= frame.startAt + frame.duration ? on : off;\n          }));\n          break;\n      }\n    };\n\n    for (var _iterator = frames[Symbol.iterator](), _step; !(_iteratorNormalCompletion = (_step = _iterator.next()).done); _iteratorNormalCompletion = true) {\n      var _ret = _loop();\n\n      if (_ret === \"continue\") continue;\n    }\n  } catch (err) {\n    _didIteratorError = true;\n    _iteratorError = err;\n  } finally {\n    try {\n      if (!_iteratorNormalCompletion && _iterator.return != null) {\n        _iterator.return();\n      }\n    } finally {\n      if (_didIteratorError) {\n        throw _iteratorError;\n      }\n    }\n  }\n};\n\nvar findTextStepTime = (prevTime, prevTimeIndex, nextTime, total, frames) => {\n  var _iteratorNormalCompletion = true;\n  var _didIteratorError = false;\n  var _iteratorError = undefined;\n\n  try {\n    for (var _iterator = frames[Symbol.iterator](), _step; !(_iteratorNormalCompletion = (_step = _iterator.next()).done); _iteratorNormalCompletion = true) {\n      var frame = _step.value;\n\n      if (frame.type === FrameType.Pause && frame.startAt >= prevTime && frame.startAt <= nextTime && frame.startIndex > prevTimeIndex) {\n        return {\n          nextTime: frame.startAt,\n          nextTimeIndex: frame.startIndex,\n          pause: true,\n          end: false\n        };\n      }\n    }\n  } catch (err) {\n    _didIteratorError = true;\n    _iteratorError = err;\n  } finally {\n    try {\n      if (!_iteratorNormalCompletion && _iterator.return != null) {\n        _iterator.return();\n      }\n    } finally {\n      if (_didIteratorError) {\n        throw _iteratorError;\n      }\n    }\n  }\n\n  if (nextTime > total) {\n    return {\n      nextTime: total,\n      nextTimeIndex: 0,\n      pause: true,\n      end: true\n    };\n  }\n\n  return {\n    nextTime,\n    nextTimeIndex: 0,\n    pause: false,\n    end: false\n  };\n};\n\n// @TODO make this immutable\nvar prepareFrames = frames => {\n  frames.sort((a, b) => a.startAt - b.startAt);\n\n  for (var i = 0; i < frames.length; i++) {\n    var frame = frames[i];\n    var prevFrame = frames[i - 1];\n    var nextFrame = frames[i + 1];\n\n    if (prevFrame && prevFrame.startAt === frame.startAt) {\n      frame.startIndex = prevFrame.startIndex + 1;\n    } else if (nextFrame && nextFrame.startAt === frame.startAt) {\n      frame.startIndex = 1;\n    }\n  }\n\n  return frames;\n};\n\nvar lightTrails = function lightTrails(trailFunction) {\n  var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n  var currentTime = 0;\n  var currentTimeIndex = 0;\n  var playing = false;\n  var frames = prepareFrames(trailFunction(0));\n  var total = totalDuration(frames);\n\n  var prepare = () => {\n    render(currentTime, currentTimeIndex, frames);\n  };\n\n  var seek = function seek(time) {\n    var offsetIndex = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 0;\n    currentTime = time;\n    currentTimeIndex = offsetIndex;\n    updateOnCurrent();\n  };\n\n  var updateOnCurrent = () => {\n    var _options$onUpdate;\n\n    render(currentTime, currentTimeIndex, frames);\n    (_options$onUpdate = options.onUpdate) === null || _options$onUpdate === void 0 ? void 0 : _options$onUpdate.call(options);\n  };\n\n  var play = () => {\n    var _options$onPlay;\n\n    var start = 0;\n    playing = true;\n    (_options$onPlay = options.onPlay) === null || _options$onPlay === void 0 ? void 0 : _options$onPlay.call(options);\n\n    var step = time => {\n      if (!start) {\n        start = time; // skip first frame\n\n        requestAnimationFrame(step);\n        return;\n      }\n\n      var diff = time - start;\n      start = time;\n\n      var _findTextStepTime = findTextStepTime(currentTime, currentTimeIndex, currentTime + diff, total, frames),\n          nextTime = _findTextStepTime.nextTime,\n          nextTimeIndex = _findTextStepTime.nextTimeIndex,\n          pause = _findTextStepTime.pause,\n          end = _findTextStepTime.end;\n\n      currentTime = nextTime;\n      currentTimeIndex = nextTimeIndex;\n      updateOnCurrent();\n\n      if (end) {\n        var _options$onComplete;\n\n        playing = false;\n        (_options$onComplete = options.onComplete) === null || _options$onComplete === void 0 ? void 0 : _options$onComplete.call(options);\n        return;\n      }\n\n      if (!playing || pause) {\n        var _options$onPause;\n\n        playing = false;\n        (_options$onPause = options.onPause) === null || _options$onPause === void 0 ? void 0 : _options$onPause.call(options);\n        return;\n      }\n\n      requestAnimationFrame(step);\n    };\n\n    requestAnimationFrame(step);\n  };\n\n  var pause = () => {\n    playing = false;\n  };\n\n  var getStatus = () => ({\n    playing,\n    ended: currentTime === total,\n    started: currentTime > 0,\n    currentTime,\n    currentTimeIndex,\n    total\n  });\n\n  return {\n    prepare,\n    play,\n    pause,\n    seek,\n    total,\n    getStatus,\n    __dev: {\n      options,\n      frames\n    }\n  };\n};\n\nfunction _objectWithoutPropertiesLoose(source, excluded) {\n  if (source == null) return {};\n  var target = {};\n  var sourceKeys = Object.keys(source);\n  var key, i;\n\n  for (i = 0; i < sourceKeys.length; i++) {\n    key = sourceKeys[i];\n    if (excluded.indexOf(key) >= 0) continue;\n    target[key] = source[key];\n  }\n\n  return target;\n}\n\nfunction _objectWithoutProperties(source, excluded) {\n  if (source == null) return {};\n  var target = _objectWithoutPropertiesLoose(source, excluded);\n  var key, i;\n\n  if (Object.getOwnPropertySymbols) {\n    var sourceSymbolKeys = Object.getOwnPropertySymbols(source);\n\n    for (i = 0; i < sourceSymbolKeys.length; i++) {\n      key = sourceSymbolKeys[i];\n      if (excluded.indexOf(key) >= 0) continue;\n      if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue;\n      target[key] = source[key];\n    }\n  }\n\n  return target;\n}\n\nvar selectElement = selector => {\n  if (typeof selector === 'string') {\n    var element = document.querySelector(selector);\n\n    if (!element) {\n      throw new Error(\"[lighting] Element (\".concat(selector, \") not found\"));\n    }\n\n    return element;\n  }\n\n  return selector;\n};\n\nvar htmlElementRenderer = selector => {\n  var element = selectElement(selector);\n\n  var renderer = values => {\n    var text = values.text,\n        x = values.x,\n        y = values.y,\n        scale = values.scale,\n        skewX = values.skewX,\n        skewY = values.skewY,\n        rotate = values.rotate,\n        styles = _objectWithoutProperties(values, [\"text\", \"x\", \"y\", \"scale\", \"skewX\", \"skewY\", \"rotate\"]);\n\n    setCssValue(element, styles);\n\n    if (text !== undefined) {\n      element.textContent = text;\n    }\n\n    var transform = getTransform({\n      x,\n      y,\n      scale,\n      skewX,\n      skewY,\n      rotate\n    });\n\n    if (transform) {\n      setCssValue(element, {\n        transform\n      });\n    }\n  }; // @ts-ignore\n\n\n  renderer.__EL = element;\n  return renderer;\n};\n\nvar getTransform = values => {\n  var val = [];\n\n  if (values.x !== undefined || values.y !== undefined) {\n    var _values$x = values.x,\n        x = _values$x === void 0 ? 0 : _values$x,\n        _values$y = values.y,\n        y = _values$y === void 0 ? 0 : _values$y;\n    val.push(\"translate(\".concat(x, \", \").concat(y, \")\"));\n  }\n\n  if (values.rotate !== undefined) {\n    val.push(\"rotate(\".concat(values.rotate, \")\"));\n  }\n\n  if (values.scale !== undefined) {\n    val.push(\"scale(\".concat(values.scale, \")\"));\n  }\n\n  if (values.skewX !== undefined) {\n    val.push(\"skewX(\".concat(values.skewX, \")\"));\n  }\n\n  if (values.skewY !== undefined) {\n    val.push(\"skewY(\".concat(values.skewY, \")\"));\n  }\n\n  if (!val.length) {\n    return undefined;\n  }\n\n  return val.join(' ');\n};\n\nvar setCssValue = (el, values) => {\n  for (var _i = 0, _Object$entries = Object.entries(values); _i < _Object$entries.length; _i++) {\n    var _Object$entries$_i = _slicedToArray(_Object$entries[_i], 2),\n        key = _Object$entries$_i[0],\n        value = _Object$entries$_i[1];\n\n    el.style.setProperty(key, value);\n  }\n};\n\nvar trail = (target, operators) => {\n  var renderer = findRenderer(target);\n  return startAt => {\n    var offset = startAt;\n    var frames = operators.map(operator => {\n      var frame = operator(offset);\n\n      if (typeof frame === 'function') {\n        frame = frame(renderer);\n      }\n\n      offset += Math.max(...frame.map(frame => frame.duration));\n      return frame;\n    }).flat();\n    return frames;\n  };\n};\n\nvar findRenderer = target => {\n  if (typeof target === 'function') {\n    return target;\n  }\n\n  if (typeof target === 'string' || target instanceof HTMLElement) {\n    return htmlElementRenderer(target);\n  }\n\n  throw new Error(\"[lighting:animate] Invalid renderer (\".concat(target.toString(), \")\"));\n};\n\nvar cascade = (frames, options) => startAt => frames.flatMap((frameFn, index) => {\n  var offset = options.offset(index) + startAt;\n  return frameFn(offset);\n});\n\nvar parallel = frames => startAt => frames.flatMap(frameFn => frameFn(startAt));\n\nvar sequence = frames => startAt => {\n  var offset = startAt;\n  return frames.flatMap(frameFn => {\n    var frame = frameFn(offset);\n    offset = totalDuration(frame);\n    return frame;\n  });\n};\n\nvar pow = Math.pow,\n    sin = Math.sin;\nvar PI = Math.PI;\nvar easeInOut = n => 0.5 * (sin((n - 0.5) * PI) + 1);\nvar easeIn = n => pow(n, 1.675);\nvar easeOut = n => 1 - pow(1 - n, 1.675);\nvar linear = x => x;\n\nvar fromTo = function fromTo(values, duration) {\n  var easing = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : easeInOut;\n  return startAt => renderer => [{\n    type: FrameType.Tween,\n    startAt,\n    startIndex: 0,\n    duration,\n    values,\n    renderer,\n    easing\n  }];\n};\nvar set = values => startAt => renderer => [{\n  type: FrameType.Set,\n  startAt,\n  startIndex: 0,\n  duration: 0,\n  values,\n  renderer\n}];\nvar delay = duration => startAt => [{\n  type: FrameType.Delay,\n  startAt,\n  startIndex: 0,\n  duration\n}];\nvar pause = () => startAt => [{\n  type: FrameType.Pause,\n  startAt,\n  startIndex: 0,\n  duration: 0\n}];\n\nvar colorToString = color => \"rgba(\".concat(color.join(', '), \")\");\n\nvar colorFromHEX = color => {\n  var r = parseInt(color.substring(1, 3), 16);\n  var g = parseInt(color.substring(3, 5), 16);\n  var b = parseInt(color.substring(5, 7), 16);\n  return [r, g, b, 1];\n};\n\nvar colorFromRGB = color => {\n  var _color$match$map = color.match(/(\\d|\\.)+/g).map(Number),\n      _color$match$map2 = _slicedToArray(_color$match$map, 4),\n      r = _color$match$map2[0],\n      g = _color$match$map2[1],\n      b = _color$match$map2[2],\n      _color$match$map2$ = _color$match$map2[3],\n      a = _color$match$map2$ === void 0 ? 1 : _color$match$map2$;\n\n  return [r, g, b, a];\n};\n\nvar getColor = color => {\n  if (color.startsWith('#')) {\n    if (color.length === 4) {\n      var _color = _slicedToArray(color, 4),\n          r = _color[1],\n          g = _color[2],\n          b = _color[3];\n\n      var longHex = '#' + r + r + g + g + b + b;\n      return colorFromHEX(longHex);\n    }\n\n    return colorFromHEX(color);\n  }\n\n  if (color.startsWith('rgb')) {\n    return colorFromRGB(color);\n  }\n\n  throw new Error(\"[lighting:color] Unknown color \\\"\".concat(color, \"\\\", use hex, rgb or rgba\"));\n};\n\nvar color = (a, b) => {\n  var c1 = getColor(a);\n  var c2 = getColor(b);\n  return p => {\n    var n = limit(p);\n    var c = [];\n\n    for (var i = 0; i < 3; i++) {\n      var ce1 = c1[i] * c1[i];\n      var ce2 = c2[i] * c2[i];\n      c[i] = Math.sqrt(n * (ce2 - ce1) + ce1) >> 0;\n    }\n\n    c[3] = (c2[3] - c1[3]) * n + c1[3];\n    return colorToString(c);\n  };\n};\nvar colorChain = a => {\n  var pref = a;\n  return b => {\n    var newVal = color(pref, b);\n    pref = b;\n    return newVal;\n  };\n};\n\nvar text = txt => n => {\n  return txt.substr(0, txt.length * n);\n};\n\nvar val = (a, b, suffix) => n => {\n  var val = (b - a) * n + a;\n  return suffix ? val + suffix : val;\n};\nvar valChain = (a, suffix) => {\n  var pref = a;\n  return b => {\n    var newVal = val(pref, b, suffix);\n    pref = b;\n    return newVal;\n  };\n};\n\nexport { FrameType, cascade, color, colorChain, delay, easeIn, easeInOut, easeOut, fromTo, htmlElementRenderer, lightTrails, linear, parallel, pause, sequence, set, setCssValue, shouldSkipFrame, text, trail, val, valChain };\n","function _defineProperty(obj, key, value) {\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n\n  return obj;\n}\n\nvar FrameType;\n\n(function (FrameType) {\n  FrameType[\"Pause\"] = \"Pause\";\n  FrameType[\"Delay\"] = \"Delay\";\n  FrameType[\"Set\"] = \"Set\";\n  FrameType[\"Tween\"] = \"Tween\";\n})(FrameType || (FrameType = {}));\n\nvar shouldSkipFrame = (currentTime, currentTimeIndex, frame) => {\n  if (frame.startAt > currentTime) return true;\n  if (frame.startAt === currentTime && frame.startIndex > currentTimeIndex) return true;\n  return false;\n};\n\nvar bg = {\n  [FrameType.Tween]: '#4d7a16',\n  [FrameType.Set]: 'lightgray',\n  [FrameType.Delay]: '#666',\n  [FrameType.Pause]: 'lightgray'\n};\nvar createBarEl = (frame, options, skipped) => {\n  var _frame$renderer;\n\n  var el = document.createElement('div');\n  var htmlPayload = 'renderer' in frame && ((_frame$renderer = frame.renderer) === null || _frame$renderer === void 0 ? void 0 : _frame$renderer.__EL) || undefined;\n\n  if (htmlPayload) {\n    el.textContent = \"[\".concat(htmlPayload.tagName, \"] \");\n  } else {\n    el.textContent = \"\".concat(frame.type);\n  }\n\n  el.title = \"[\".concat(frame.startAt, \" - \").concat(frame.startAt + frame.duration, \"] \").concat(frame.type);\n\n  if ('values' in frame) {\n    var values = \" (\".concat(Object.keys(frame.values).join(', '), \")\");\n    el.textContent += values;\n    el.title += values;\n  }\n\n  el.onclick = () => {\n    // eslint-disable-next-line no-console\n    console.log(frame);\n  };\n\n  if (htmlPayload) {\n    el.onmouseover = () => {\n      htmlPayload.style.outline = '2px solid red';\n      htmlPayload.style.outlineOffset = '2px';\n    };\n\n    el.onmouseout = () => {\n      htmlPayload.style.outline = '';\n      htmlPayload.style.outlineOffset = '';\n    };\n  }\n\n  el.style.opacity = skipped ? '0.3' : '1';\n  el.style.height = '14px';\n  el.style.lineHeight = '14px';\n  el.style.fontSize = '10px';\n  el.style.textIndent = '5px'; // el.style.overflow = 'hidden'\n\n  el.style.whiteSpace = 'nowrap';\n  el.style.marginBottom = '1px';\n  el.style.color = 'white';\n  el.style.marginLeft = frame.startAt / options.scale + 'px';\n\n  switch (frame.type) {\n    case FrameType.Pause:\n    case FrameType.Set:\n      el.style.width = 'auto';\n      el.style.color = bg[frame.type];\n      el.style.borderLeft = \"2px solid \".concat(bg[frame.type]);\n      break;\n\n    default:\n      el.style.backgroundColor = bg[frame.type];\n      el.style.width = frame.duration / options.scale + 'px';\n      el.style.borderRadius = '3px';\n      break;\n  }\n\n  return el;\n};\n\nvar createLineEl = options => {\n  var el = document.createElement('div');\n  el.style.position = 'absolute';\n  el.style.left = '0px';\n  el.style.top = '0';\n  el.style.bottom = '0';\n  el.style.backgroundColor = 'white';\n  el.style.width = '1px';\n  el.style.pointerEvents = 'none';\n  el.style.opacity = '0.7';\n\n  var update = timeOffset => {\n    el.style.left = \"\".concat(timeOffset / options.scale, \"px\");\n  };\n\n  return {\n    el,\n    update\n  };\n};\n\nvar createRootEl = options => {\n  var el = document.createElement('div');\n  el.style.zIndex = '10000';\n  el.style.position = 'absolute';\n  el.style.fontFamily = 'monospace';\n  el.style.overflow = 'auto';\n  el.style.left = '10px';\n  el.style.bottom = '110px';\n  el.style.backgroundColor = 'rgba(0,0,0,.1)';\n  el.style.width = options.width + 'px';\n  el.style.display = 'grid';\n  el.style.gridTemplateRows = '1fr';\n  el.style.gridGap = '10px';\n  return el;\n};\n\nvar createSeekEl = (options, onSeek) => {\n  var el = document.createElement('div');\n  el.style.backgroundColor = 'rgba(0,0,0,.5)';\n  el.style.height = '50px';\n  el.style.webkitUserSelect = null;\n  el.style.cursor = 'col-resize';\n  var seeking = false;\n\n  el.onmousedown = event => {\n    seeking = true;\n    onSeek(event.offsetX * options.scale);\n  };\n\n  el.onmouseup = () => {\n    seeking = false;\n  };\n\n  el.onmousemove = event => {\n    if (seeking) {\n      onSeek(event.offsetX * options.scale);\n    }\n  };\n\n  return el;\n};\n\nvar round = Math.round;\nvar createStatusEl = () => {\n  var el = document.createElement('div');\n  el.style.padding = '10px 10px 0';\n  el.style.color = 'white';\n\n  var update = status => {\n    var textStatus = status.playing ? 'Playing' : status.ended ? 'End' : \"Paused (\".concat(status.currentTimeIndex, \")\");\n    el.innerText = \"\".concat(round(status.currentTime), \"/\").concat(status.total, \" [\").concat(textStatus, \"]\");\n  };\n\n  return {\n    el,\n    update\n  };\n};\n\nvar inspectorOptions = {\n  width: window.innerWidth - 20,\n  scale: 4\n};\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\nvar inspector = anim => {\n  var status = anim.getStatus();\n  var rootEl = createRootEl(inspectorOptions);\n  var barsWrapperEl = document.createElement('div');\n  var statusEl = createStatusEl();\n  var lineEl = createLineEl(inspectorOptions);\n  var seekEl = createSeekEl(inspectorOptions, off => anim.seek(off));\n\n  var userOptions = _objectSpread({}, anim.__dev.options);\n\n  inspectorOptions.scale = anim.total / (inspectorOptions.width - 200);\n\n  anim.__dev.options.onUpdate = () => {\n    var _userOptions$onUpdate;\n\n    status = anim.getStatus();\n    (_userOptions$onUpdate = userOptions.onUpdate) === null || _userOptions$onUpdate === void 0 ? void 0 : _userOptions$onUpdate.call(userOptions);\n    render();\n  };\n\n  anim.__dev.options.onPause = () => {\n    var _userOptions$onPause;\n\n    status = anim.getStatus();\n    (_userOptions$onPause = userOptions.onPause) === null || _userOptions$onPause === void 0 ? void 0 : _userOptions$onPause.call(userOptions);\n    render();\n  };\n\n  anim.__dev.options.onComplete = () => {\n    var _userOptions$onComple;\n\n    status = anim.getStatus();\n    (_userOptions$onComple = userOptions.onComplete) === null || _userOptions$onComple === void 0 ? void 0 : _userOptions$onComple.call(userOptions);\n    render();\n  };\n\n  barsWrapperEl.style.maxHeight = '70vh';\n  barsWrapperEl.style.overflow = 'auto';\n\n  var render = () => {\n    barsWrapperEl.innerHTML = '';\n\n    anim.__dev.frames.forEach(frame => {\n      barsWrapperEl.appendChild(createBarEl(frame, inspectorOptions, shouldSkipFrame(status.currentTime, status.currentTimeIndex, frame)));\n    });\n\n    lineEl.update(status.currentTime);\n    lineEl.el.scrollIntoView({\n      behavior: 'auto',\n      inline: 'center',\n      block: 'center'\n    });\n    statusEl.update(status);\n  };\n\n  render();\n  rootEl.appendChild(statusEl.el);\n  rootEl.appendChild(seekEl);\n  rootEl.appendChild(barsWrapperEl);\n  rootEl.appendChild(lineEl.el);\n  document.body.appendChild(rootEl);\n};\n\nexport { inspector };\n","import {\n    cascade,\n    colorChain,\n    fromTo,\n    lightTrails,\n    SimpleTrailFunction,\n    trail,\n    val,\n    delay,\n    color,\n    parallel,\n    sequence,\n} from 'light-trails'\nimport { inspector } from 'light-trails-inspector'\n\nconst nextColor = colorChain('#FFFFFF')\n\nconst titleTrail = trail('h1', [\n    fromTo(\n        {\n            color: nextColor('#FF00F0'),\n            opacity: val(0, 1),\n        },\n        1000,\n    ),\n    fromTo({ color: nextColor('#00F0F0') }, 1000),\n])\n\nconst pTrail = trail('.top p', [\n    fromTo(\n        {\n            opacity: val(0, 1),\n            y: val(-10, 0, 'px'),\n        },\n        1000,\n    ),\n])\n\nconst mainTrail = trail('main', [delay(800), fromTo({ opacity: val(0, 1) }, 1000)])\n\nconst trailAnimations: SimpleTrailFunction[] = []\n\nconst leftVal = val(0, 100, '%')\n\nconst trialsCount = Math.round(window.innerWidth / 20)\n\nfor (let i = 0; i < trialsCount; i++) {\n    const el = document.createElement('span')\n    el.classList.add('trail')\n    el.style.left = leftVal(i / (trialsCount + 0.5 - Math.random())) as string\n\n    const size = Math.max(0.2, Math.random())\n\n    trailAnimations.push(\n        trail(el, [\n            fromTo(\n                {\n                    opacity: val(0, Math.min(size, 0.8)),\n                    y: val(0, window.innerHeight * Math.random(), 'px'),\n                    scale: val(0, size),\n                },\n                800,\n            ),\n        ]),\n    )\n\n    document.body.appendChild(el)\n}\n\ntrailAnimations.sort(() => 0.5 - Math.random())\n\nconst initAnimation = lightTrails(\n    parallel([\n        cascade(trailAnimations, {\n            offset: (i: number) => i * 30,\n        }),\n        sequence([\n            delay(1300),\n            cascade([titleTrail, pTrail, mainTrail], {\n                offset: (i: number) => i * 300,\n            }),\n        ]),\n    ]),\n)\n\ninitAnimation.play()\n\nconst colorVar = colorChain('#FF00F0')\n\nconst bodyColorTrial = trail('body', [\n    fromTo({ '--color': colorVar('#00F0F0') }, 1000),\n    fromTo({ '--color': colorVar('#FF00F0') }, 1000),\n])\n\nconst colorAnimation = lightTrails(bodyColorTrial)\n\ncolorAnimation.prepare()\nconst { total } = colorAnimation.getStatus()\n\nwindow.addEventListener('scroll', () => {\n    const { documentElement, body } = document\n\n    const percent =\n        (documentElement.scrollTop || body.scrollTop) /\n        ((documentElement.scrollHeight || body.scrollHeight) -\n            documentElement.clientHeight)\n    colorAnimation.seek(total * percent)\n})\n\nconst inspectorButton = document.querySelector<HTMLButtonElement>('#inspector')\n\nconst showInspector = () => {\n    inspector(initAnimation)\n    inspectorButton.hidden = true\n}\ninspectorButton.addEventListener('click', showInspector)\n"]}