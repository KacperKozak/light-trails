{"version":3,"sources":["../../../node_modules/light-trails/dist/light-trails.esm.js","../../../node_modules/light-trails-inspector/dist/light-trails-inspector.esm.js","index.ts"],"names":["FrameType","totalDuration","frames","Math","max","map","frame","startAt","duration","_arrayWithHoles","arr","Array","isArray","_iterableToArrayLimit","i","Symbol","iterator","Object","prototype","toString","call","_arr","_n","_d","_e","undefined","_s","_i","next","done","push","value","length","err","_nonIterableRest","TypeError","_slicedToArray","mapValues","object","mapFunction","fromEntries","entries","_ref","_ref2","key","limit","min","arguments","shouldSkipFrame","currentTime","currentTimeIndex","startIndex","render","type","Tween","renderer","values","val","Set","_iteratorNormalCompletion","_didIteratorError","_iteratorError","_loop","_step","n","easing","_val","off","on","_iterator","return","findTextStepTime","prevTime","prevTimeIndex","nextTime","total","Pause","nextTimeIndex","pause","end","prepareFrames","sort","a","b","prevFrame","nextFrame","lightTrails","trailFunction","options","playing","updateOnCurrent","_options$onUpdate","onUpdate","prepare","play","_options$onPlay","start","onPlay","step","time","requestAnimationFrame","diff","_findTextStepTime","_options$onComplete","_options$onPause","onComplete","onPause","seek","offsetIndex","getStatus","ended","started","__dev","_objectWithoutPropertiesLoose","source","excluded","target","sourceKeys","keys","indexOf","_objectWithoutProperties","getOwnPropertySymbols","sourceSymbolKeys","propertyIsEnumerable","selectElement","selector","element","document","querySelector","Error","concat","htmlElementRenderer","text","x","y","scale","skewX","skewY","rotate","styles","setCssValue","textContent","transform","getTransform","__EL","_values$x","_values$y","join","el","_Object$entries","_Object$entries$_i","style","setProperty","trail","operators","findRenderer","offset","operator","flat","HTMLElement","cascade","flatMap","frameFn","index","parallel","sequence","pow","sin","PI","easeInOut","easeIn","easeOut","linear","fromTo","set","delay","Delay","colorToString","color","colorFromHEX","parseInt","substring","colorFromRGB","_color$match$map","_color$match$map2","match","Number","r","g","_color$match$map2$","getColor","startsWith","_color","c1","c2","p","c","ce1","ce2","sqrt","colorChain","pref","newVal","txt","substr","suffix","valChain","_defineProperty","obj","defineProperty","enumerable","configurable","writable","bg","createBarEl","skipped","_frame$renderer","createElement","htmlPayload","tagName","title","onclick","console","log","onmouseover","outline","outlineOffset","onmouseout","opacity","height","lineHeight","fontSize","textIndent","whiteSpace","marginBottom","marginLeft","width","borderLeft","backgroundColor","borderRadius","createLineEl","position","left","top","bottom","pointerEvents","update","timeOffset","createRootEl","zIndex","fontFamily","overflow","display","gridTemplateRows","gridGap","createSeekEl","onSeek","webkitUserSelect","cursor","seeking","onmousedown","event","offsetX","onmouseup","onmousemove","round","createStatusEl","padding","status","textStatus","innerText","inspectorOptions","window","innerWidth","ownKeys","enumerableOnly","symbols","filter","sym","getOwnPropertyDescriptor","apply","_objectSpread","forEach","getOwnPropertyDescriptors","defineProperties","inspector","anim","rootEl","barsWrapperEl","statusEl","lineEl","seekEl","userOptions","_userOptions$onUpdate","_userOptions$onPause","_userOptions$onComple","maxHeight","innerHTML","appendChild","scrollIntoView","behavior","inline","block","body"],"mappings":"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","file":"src.1a8c5a7a.js","sourceRoot":"../src","sourcesContent":["var FrameType;\n\n(function (FrameType) {\n  FrameType[\"Pause\"] = \"Pause\";\n  FrameType[\"Delay\"] = \"Delay\";\n  FrameType[\"Set\"] = \"Set\";\n  FrameType[\"Tween\"] = \"Tween\";\n})(FrameType || (FrameType = {}));\n\nvar totalDuration = frames => Math.max(...frames.map(frame => frame.startAt + frame.duration));\n\nfunction _arrayWithHoles(arr) {\n  if (Array.isArray(arr)) return arr;\n}\n\nfunction _iterableToArrayLimit(arr, i) {\n  if (!(Symbol.iterator in Object(arr) || Object.prototype.toString.call(arr) === \"[object Arguments]\")) {\n    return;\n  }\n\n  var _arr = [];\n  var _n = true;\n  var _d = false;\n  var _e = undefined;\n\n  try {\n    for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) {\n      _arr.push(_s.value);\n\n      if (i && _arr.length === i) break;\n    }\n  } catch (err) {\n    _d = true;\n    _e = err;\n  } finally {\n    try {\n      if (!_n && _i[\"return\"] != null) _i[\"return\"]();\n    } finally {\n      if (_d) throw _e;\n    }\n  }\n\n  return _arr;\n}\n\nfunction _nonIterableRest() {\n  throw new TypeError(\"Invalid attempt to destructure non-iterable instance\");\n}\n\nfunction _slicedToArray(arr, i) {\n  return _arrayWithHoles(arr) || _iterableToArrayLimit(arr, i) || _nonIterableRest();\n}\n\nvar mapValues = (object, mapFunction) => Object.fromEntries(Object.entries(object).map((_ref) => {\n  var _ref2 = _slicedToArray(_ref, 2),\n      key = _ref2[0],\n      value = _ref2[1];\n\n  return [key, mapFunction(value)];\n}));\nvar limit = function limit(value) {\n  var min = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 0;\n  var max = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : 1;\n  return Math.min(Math.max(value, min), max);\n};\n\nvar shouldSkipFrame = (currentTime, currentTimeIndex, frame) => {\n  if (frame.startAt > currentTime) return true;\n  if (frame.startAt === currentTime && frame.startIndex > currentTimeIndex) return true;\n  return false;\n};\n\nvar render = (currentTime, currentTimeIndex, frames) => {\n  for (var i = frames.length - 1; i >= 0; i--) {\n    var frame = frames[i];\n\n    switch (frame.type) {\n      case FrameType.Tween:\n        frame.renderer(mapValues(frame.values, val => val(0)));\n        break;\n\n      case FrameType.Set:\n        frame.renderer(mapValues(frame.values, val => val[0]));\n        break;\n    }\n  }\n\n  var _iteratorNormalCompletion = true;\n  var _didIteratorError = false;\n  var _iteratorError = undefined;\n\n  try {\n    var _loop = function _loop() {\n      var frame = _step.value;\n      if (shouldSkipFrame(currentTime, currentTimeIndex, frame)) return \"continue\";\n\n      switch (frame.type) {\n        case FrameType.Tween:\n          frame.renderer(mapValues(frame.values, val => {\n            var n = limit((currentTime - frame.startAt) / frame.duration);\n            return val(frame.easing(n));\n          }));\n          break;\n\n        case FrameType.Set:\n          frame.renderer(mapValues(frame.values, val => {\n            var _val = _slicedToArray(val, 2),\n                off = _val[0],\n                on = _val[1];\n\n            return currentTime >= frame.startAt + frame.duration ? on : off;\n          }));\n          break;\n      }\n    };\n\n    for (var _iterator = frames[Symbol.iterator](), _step; !(_iteratorNormalCompletion = (_step = _iterator.next()).done); _iteratorNormalCompletion = true) {\n      var _ret = _loop();\n\n      if (_ret === \"continue\") continue;\n    }\n  } catch (err) {\n    _didIteratorError = true;\n    _iteratorError = err;\n  } finally {\n    try {\n      if (!_iteratorNormalCompletion && _iterator.return != null) {\n        _iterator.return();\n      }\n    } finally {\n      if (_didIteratorError) {\n        throw _iteratorError;\n      }\n    }\n  }\n};\n\nvar findTextStepTime = (prevTime, prevTimeIndex, nextTime, total, frames) => {\n  var _iteratorNormalCompletion = true;\n  var _didIteratorError = false;\n  var _iteratorError = undefined;\n\n  try {\n    for (var _iterator = frames[Symbol.iterator](), _step; !(_iteratorNormalCompletion = (_step = _iterator.next()).done); _iteratorNormalCompletion = true) {\n      var frame = _step.value;\n\n      if (frame.type === FrameType.Pause && frame.startAt >= prevTime && frame.startAt <= nextTime && frame.startIndex > prevTimeIndex) {\n        return {\n          nextTime: frame.startAt,\n          nextTimeIndex: frame.startIndex,\n          pause: true,\n          end: false\n        };\n      }\n    }\n  } catch (err) {\n    _didIteratorError = true;\n    _iteratorError = err;\n  } finally {\n    try {\n      if (!_iteratorNormalCompletion && _iterator.return != null) {\n        _iterator.return();\n      }\n    } finally {\n      if (_didIteratorError) {\n        throw _iteratorError;\n      }\n    }\n  }\n\n  if (nextTime > total) {\n    return {\n      nextTime: total,\n      nextTimeIndex: 0,\n      pause: true,\n      end: true\n    };\n  }\n\n  return {\n    nextTime,\n    nextTimeIndex: 0,\n    pause: false,\n    end: false\n  };\n};\n\n// @TODO make this immutable\nvar prepareFrames = frames => {\n  frames.sort((a, b) => a.startAt - b.startAt);\n\n  for (var i = 0; i < frames.length; i++) {\n    var frame = frames[i];\n    var prevFrame = frames[i - 1];\n    var nextFrame = frames[i + 1];\n\n    if (prevFrame && prevFrame.startAt === frame.startAt) {\n      frame.startIndex = prevFrame.startIndex + 1;\n    } else if (nextFrame && nextFrame.startAt === frame.startAt) {\n      frame.startIndex = 1;\n    }\n  }\n\n  return frames;\n};\n\nvar lightTrails = function lightTrails(trailFunction) {\n  var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n  var currentTime = 0;\n  var currentTimeIndex = 0;\n  var playing = false;\n  var frames = prepareFrames(trailFunction(0));\n  var total = totalDuration(frames);\n\n  var prepare = () => {\n    render(currentTime, currentTimeIndex, frames);\n  };\n\n  var seek = function seek(time) {\n    var offsetIndex = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 0;\n    currentTime = time;\n    currentTimeIndex = offsetIndex;\n    updateOnCurrent();\n  };\n\n  var updateOnCurrent = () => {\n    var _options$onUpdate;\n\n    render(currentTime, currentTimeIndex, frames);\n    (_options$onUpdate = options.onUpdate) === null || _options$onUpdate === void 0 ? void 0 : _options$onUpdate.call(options);\n  };\n\n  var play = () => {\n    var _options$onPlay;\n\n    var start = 0;\n    playing = true;\n    (_options$onPlay = options.onPlay) === null || _options$onPlay === void 0 ? void 0 : _options$onPlay.call(options);\n\n    var step = time => {\n      if (!start) {\n        start = time; // skip first frame\n\n        requestAnimationFrame(step);\n        return;\n      }\n\n      var diff = time - start;\n      start = time;\n\n      var _findTextStepTime = findTextStepTime(currentTime, currentTimeIndex, currentTime + diff, total, frames),\n          nextTime = _findTextStepTime.nextTime,\n          nextTimeIndex = _findTextStepTime.nextTimeIndex,\n          pause = _findTextStepTime.pause,\n          end = _findTextStepTime.end;\n\n      currentTime = nextTime;\n      currentTimeIndex = nextTimeIndex;\n      updateOnCurrent();\n\n      if (end) {\n        var _options$onComplete;\n\n        playing = false;\n        (_options$onComplete = options.onComplete) === null || _options$onComplete === void 0 ? void 0 : _options$onComplete.call(options);\n        return;\n      }\n\n      if (!playing || pause) {\n        var _options$onPause;\n\n        playing = false;\n        (_options$onPause = options.onPause) === null || _options$onPause === void 0 ? void 0 : _options$onPause.call(options);\n        return;\n      }\n\n      requestAnimationFrame(step);\n    };\n\n    requestAnimationFrame(step);\n  };\n\n  var pause = () => {\n    playing = false;\n  };\n\n  var getStatus = () => ({\n    playing,\n    ended: currentTime === total,\n    started: currentTime > 0,\n    currentTime,\n    currentTimeIndex,\n    total\n  });\n\n  return {\n    prepare,\n    play,\n    pause,\n    seek,\n    total,\n    getStatus,\n    __dev: {\n      options,\n      frames\n    }\n  };\n};\n\nfunction _objectWithoutPropertiesLoose(source, excluded) {\n  if (source == null) return {};\n  var target = {};\n  var sourceKeys = Object.keys(source);\n  var key, i;\n\n  for (i = 0; i < sourceKeys.length; i++) {\n    key = sourceKeys[i];\n    if (excluded.indexOf(key) >= 0) continue;\n    target[key] = source[key];\n  }\n\n  return target;\n}\n\nfunction _objectWithoutProperties(source, excluded) {\n  if (source == null) return {};\n  var target = _objectWithoutPropertiesLoose(source, excluded);\n  var key, i;\n\n  if (Object.getOwnPropertySymbols) {\n    var sourceSymbolKeys = Object.getOwnPropertySymbols(source);\n\n    for (i = 0; i < sourceSymbolKeys.length; i++) {\n      key = sourceSymbolKeys[i];\n      if (excluded.indexOf(key) >= 0) continue;\n      if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue;\n      target[key] = source[key];\n    }\n  }\n\n  return target;\n}\n\nvar selectElement = selector => {\n  if (typeof selector === 'string') {\n    var element = document.querySelector(selector);\n\n    if (!element) {\n      throw new Error(\"[lighting] Element (\".concat(selector, \") not found\"));\n    }\n\n    return element;\n  }\n\n  return selector;\n};\n\nvar htmlElementRenderer = selector => {\n  var element = selectElement(selector);\n\n  var renderer = values => {\n    var text = values.text,\n        x = values.x,\n        y = values.y,\n        scale = values.scale,\n        skewX = values.skewX,\n        skewY = values.skewY,\n        rotate = values.rotate,\n        styles = _objectWithoutProperties(values, [\"text\", \"x\", \"y\", \"scale\", \"skewX\", \"skewY\", \"rotate\"]);\n\n    setCssValue(element, styles);\n\n    if (text !== undefined) {\n      element.textContent = text;\n    }\n\n    var transform = getTransform({\n      x,\n      y,\n      scale,\n      skewX,\n      skewY,\n      rotate\n    });\n\n    if (transform) {\n      setCssValue(element, {\n        transform\n      });\n    }\n  }; // @ts-ignore\n\n\n  renderer.__EL = element;\n  return renderer;\n};\n\nvar getTransform = values => {\n  var val = [];\n\n  if (values.x !== undefined || values.y !== undefined) {\n    var _values$x = values.x,\n        x = _values$x === void 0 ? 0 : _values$x,\n        _values$y = values.y,\n        y = _values$y === void 0 ? 0 : _values$y;\n    val.push(\"translate(\".concat(x, \", \").concat(y, \")\"));\n  }\n\n  if (values.rotate !== undefined) {\n    val.push(\"rotate(\".concat(values.rotate, \")\"));\n  }\n\n  if (values.scale !== undefined) {\n    val.push(\"scale(\".concat(values.scale, \")\"));\n  }\n\n  if (values.skewX !== undefined) {\n    val.push(\"skewX(\".concat(values.skewX, \")\"));\n  }\n\n  if (values.skewY !== undefined) {\n    val.push(\"skewY(\".concat(values.skewY, \")\"));\n  }\n\n  if (!val.length) {\n    return undefined;\n  }\n\n  return val.join(' ');\n};\n\nvar setCssValue = (el, values) => {\n  for (var _i = 0, _Object$entries = Object.entries(values); _i < _Object$entries.length; _i++) {\n    var _Object$entries$_i = _slicedToArray(_Object$entries[_i], 2),\n        key = _Object$entries$_i[0],\n        value = _Object$entries$_i[1];\n\n    el.style.setProperty(key, value);\n  }\n};\n\nvar trail = (target, operators) => {\n  var renderer = findRenderer(target);\n  return startAt => {\n    var offset = startAt;\n    var frames = operators.map(operator => {\n      var frame = operator(offset);\n\n      if (typeof frame === 'function') {\n        frame = frame(renderer);\n      }\n\n      offset += Math.max(...frame.map(frame => frame.duration));\n      return frame;\n    }).flat();\n    return frames;\n  };\n};\n\nvar findRenderer = target => {\n  if (typeof target === 'function') {\n    return target;\n  }\n\n  if (typeof target === 'string' || target instanceof HTMLElement) {\n    return htmlElementRenderer(target);\n  }\n\n  throw new Error(\"[lighting:animate] Invalid renderer (\".concat(target.toString(), \")\"));\n};\n\nvar cascade = (frames, options) => startAt => frames.flatMap((frameFn, index) => {\n  var offset = options.offset(index) + startAt;\n  return frameFn(offset);\n});\n\nvar parallel = frames => startAt => frames.flatMap(frameFn => frameFn(startAt));\n\nvar sequence = frames => startAt => {\n  var offset = startAt;\n  return frames.flatMap(frameFn => {\n    var frame = frameFn(offset);\n    offset = totalDuration(frame);\n    return frame;\n  });\n};\n\nvar pow = Math.pow,\n    sin = Math.sin;\nvar PI = Math.PI;\nvar easeInOut = n => 0.5 * (sin((n - 0.5) * PI) + 1);\nvar easeIn = n => pow(n, 1.675);\nvar easeOut = n => 1 - pow(1 - n, 1.675);\nvar linear = x => x;\n\nvar fromTo = function fromTo(values, duration) {\n  var easing = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : easeInOut;\n  return startAt => renderer => [{\n    type: FrameType.Tween,\n    startAt,\n    startIndex: 0,\n    duration,\n    values,\n    renderer,\n    easing\n  }];\n};\nvar set = values => startAt => renderer => [{\n  type: FrameType.Set,\n  startAt,\n  startIndex: 0,\n  duration: 0,\n  values,\n  renderer\n}];\nvar delay = duration => startAt => [{\n  type: FrameType.Delay,\n  startAt,\n  startIndex: 0,\n  duration\n}];\nvar pause = () => startAt => [{\n  type: FrameType.Pause,\n  startAt,\n  startIndex: 0,\n  duration: 0\n}];\n\nvar colorToString = color => \"rgba(\".concat(color.join(', '), \")\");\n\nvar colorFromHEX = color => {\n  var r = parseInt(color.substring(1, 3), 16);\n  var g = parseInt(color.substring(3, 5), 16);\n  var b = parseInt(color.substring(5, 7), 16);\n  return [r, g, b, 1];\n};\n\nvar colorFromRGB = color => {\n  var _color$match$map = color.match(/(\\d|\\.)+/g).map(Number),\n      _color$match$map2 = _slicedToArray(_color$match$map, 4),\n      r = _color$match$map2[0],\n      g = _color$match$map2[1],\n      b = _color$match$map2[2],\n      _color$match$map2$ = _color$match$map2[3],\n      a = _color$match$map2$ === void 0 ? 1 : _color$match$map2$;\n\n  return [r, g, b, a];\n};\n\nvar getColor = color => {\n  if (color.startsWith('#')) {\n    if (color.length === 4) {\n      var _color = _slicedToArray(color, 4),\n          r = _color[1],\n          g = _color[2],\n          b = _color[3];\n\n      var longHex = '#' + r + r + g + g + b + b;\n      return colorFromHEX(longHex);\n    }\n\n    return colorFromHEX(color);\n  }\n\n  if (color.startsWith('rgb')) {\n    return colorFromRGB(color);\n  }\n\n  throw new Error(\"[lighting:color] Unknown color \\\"\".concat(color, \"\\\", use hex, rgb or rgba\"));\n};\n\nvar color = (a, b) => {\n  var c1 = getColor(a);\n  var c2 = getColor(b);\n  return p => {\n    var n = limit(p);\n    var c = [];\n\n    for (var i = 0; i < 3; i++) {\n      var ce1 = c1[i] * c1[i];\n      var ce2 = c2[i] * c2[i];\n      c[i] = Math.sqrt(n * (ce2 - ce1) + ce1) >> 0;\n    }\n\n    c[3] = (c2[3] - c1[3]) * n + c1[3];\n    return colorToString(c);\n  };\n};\nvar colorChain = a => {\n  var pref = a;\n  return b => {\n    var newVal = color(pref, b);\n    pref = b;\n    return newVal;\n  };\n};\n\nvar text = txt => n => {\n  return txt.substr(0, txt.length * n);\n};\n\nvar val = (a, b, suffix) => n => {\n  var val = (b - a) * n + a;\n  return suffix ? val + suffix : val;\n};\nvar valChain = (a, suffix) => {\n  var pref = a;\n  return b => {\n    var newVal = val(pref, b, suffix);\n    pref = b;\n    return newVal;\n  };\n};\n\nexport { FrameType, cascade, color, colorChain, delay, easeIn, easeInOut, easeOut, fromTo, htmlElementRenderer, lightTrails, linear, parallel, pause, sequence, set, setCssValue, shouldSkipFrame, text, trail, val, valChain };\n","function _defineProperty(obj, key, value) {\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n\n  return obj;\n}\n\nvar FrameType;\n\n(function (FrameType) {\n  FrameType[\"Pause\"] = \"Pause\";\n  FrameType[\"Delay\"] = \"Delay\";\n  FrameType[\"Set\"] = \"Set\";\n  FrameType[\"Tween\"] = \"Tween\";\n})(FrameType || (FrameType = {}));\n\nvar shouldSkipFrame = (currentTime, currentTimeIndex, frame) => {\n  if (frame.startAt > currentTime) return true;\n  if (frame.startAt === currentTime && frame.startIndex > currentTimeIndex) return true;\n  return false;\n};\n\nvar bg = {\n  [FrameType.Tween]: '#4d7a16',\n  [FrameType.Set]: 'lightgray',\n  [FrameType.Delay]: '#666',\n  [FrameType.Pause]: 'lightgray'\n};\nvar createBarEl = (frame, options, skipped) => {\n  var _frame$renderer;\n\n  var el = document.createElement('div');\n  var htmlPayload = 'renderer' in frame && ((_frame$renderer = frame.renderer) === null || _frame$renderer === void 0 ? void 0 : _frame$renderer.__EL) || undefined;\n\n  if (htmlPayload) {\n    el.textContent = \"[\".concat(htmlPayload.tagName, \"] \");\n  } else {\n    el.textContent = \"\".concat(frame.type);\n  }\n\n  el.title = \"[\".concat(frame.startAt, \" - \").concat(frame.startAt + frame.duration, \"] \").concat(frame.type);\n\n  if ('values' in frame) {\n    var values = \" (\".concat(Object.keys(frame.values).join(', '), \")\");\n    el.textContent += values;\n    el.title += values;\n  }\n\n  el.onclick = () => {\n    // eslint-disable-next-line no-console\n    console.log(frame);\n  };\n\n  if (htmlPayload) {\n    el.onmouseover = () => {\n      htmlPayload.style.outline = '2px solid red';\n      htmlPayload.style.outlineOffset = '2px';\n    };\n\n    el.onmouseout = () => {\n      htmlPayload.style.outline = '';\n      htmlPayload.style.outlineOffset = '';\n    };\n  }\n\n  el.style.opacity = skipped ? '0.3' : '1';\n  el.style.height = '14px';\n  el.style.lineHeight = '14px';\n  el.style.fontSize = '10px';\n  el.style.textIndent = '5px'; // el.style.overflow = 'hidden'\n\n  el.style.whiteSpace = 'nowrap';\n  el.style.marginBottom = '1px';\n  el.style.color = 'white';\n  el.style.marginLeft = frame.startAt / options.scale + 'px';\n\n  switch (frame.type) {\n    case FrameType.Pause:\n    case FrameType.Set:\n      el.style.width = 'auto';\n      el.style.color = bg[frame.type];\n      el.style.borderLeft = \"2px solid \".concat(bg[frame.type]);\n      break;\n\n    default:\n      el.style.backgroundColor = bg[frame.type];\n      el.style.width = frame.duration / options.scale + 'px';\n      el.style.borderRadius = '3px';\n      break;\n  }\n\n  return el;\n};\n\nvar createLineEl = options => {\n  var el = document.createElement('div');\n  el.style.position = 'absolute';\n  el.style.left = '0px';\n  el.style.top = '0';\n  el.style.bottom = '0';\n  el.style.backgroundColor = 'white';\n  el.style.width = '1px';\n  el.style.pointerEvents = 'none';\n  el.style.opacity = '0.7';\n\n  var update = timeOffset => {\n    el.style.left = \"\".concat(timeOffset / options.scale, \"px\");\n  };\n\n  return {\n    el,\n    update\n  };\n};\n\nvar createRootEl = options => {\n  var el = document.createElement('div');\n  el.style.zIndex = '10000';\n  el.style.position = 'absolute';\n  el.style.fontFamily = 'monospace';\n  el.style.overflow = 'auto';\n  el.style.left = '10px';\n  el.style.bottom = '110px';\n  el.style.backgroundColor = 'rgba(0,0,0,.1)';\n  el.style.width = options.width + 'px';\n  el.style.display = 'grid';\n  el.style.gridTemplateRows = '1fr';\n  el.style.gridGap = '10px';\n  return el;\n};\n\nvar createSeekEl = (options, onSeek) => {\n  var el = document.createElement('div');\n  el.style.backgroundColor = 'rgba(0,0,0,.5)';\n  el.style.height = '50px';\n  el.style.webkitUserSelect = null;\n  el.style.cursor = 'col-resize';\n  var seeking = false;\n\n  el.onmousedown = event => {\n    seeking = true;\n    onSeek(event.offsetX * options.scale);\n  };\n\n  el.onmouseup = () => {\n    seeking = false;\n  };\n\n  el.onmousemove = event => {\n    if (seeking) {\n      onSeek(event.offsetX * options.scale);\n    }\n  };\n\n  return el;\n};\n\nvar round = Math.round;\nvar createStatusEl = () => {\n  var el = document.createElement('div');\n  el.style.padding = '10px 10px 0';\n  el.style.color = 'white';\n\n  var update = status => {\n    var textStatus = status.playing ? 'Playing' : status.ended ? 'End' : \"Paused (\".concat(status.currentTimeIndex, \")\");\n    el.innerText = \"\".concat(round(status.currentTime), \"/\").concat(status.total, \" [\").concat(textStatus, \"]\");\n  };\n\n  return {\n    el,\n    update\n  };\n};\n\nvar inspectorOptions = {\n  width: window.innerWidth - 20,\n  scale: 4\n};\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\nvar inspector = anim => {\n  var status = anim.getStatus();\n  var rootEl = createRootEl(inspectorOptions);\n  var barsWrapperEl = document.createElement('div');\n  var statusEl = createStatusEl();\n  var lineEl = createLineEl(inspectorOptions);\n  var seekEl = createSeekEl(inspectorOptions, off => anim.seek(off));\n\n  var userOptions = _objectSpread({}, anim.__dev.options);\n\n  inspectorOptions.scale = anim.total / (inspectorOptions.width - 200);\n\n  anim.__dev.options.onUpdate = () => {\n    var _userOptions$onUpdate;\n\n    status = anim.getStatus();\n    (_userOptions$onUpdate = userOptions.onUpdate) === null || _userOptions$onUpdate === void 0 ? void 0 : _userOptions$onUpdate.call(userOptions);\n    render();\n  };\n\n  anim.__dev.options.onPause = () => {\n    var _userOptions$onPause;\n\n    status = anim.getStatus();\n    (_userOptions$onPause = userOptions.onPause) === null || _userOptions$onPause === void 0 ? void 0 : _userOptions$onPause.call(userOptions);\n    render();\n  };\n\n  anim.__dev.options.onComplete = () => {\n    var _userOptions$onComple;\n\n    status = anim.getStatus();\n    (_userOptions$onComple = userOptions.onComplete) === null || _userOptions$onComple === void 0 ? void 0 : _userOptions$onComple.call(userOptions);\n    render();\n  };\n\n  barsWrapperEl.style.maxHeight = '70vh';\n  barsWrapperEl.style.overflow = 'auto';\n\n  var render = () => {\n    barsWrapperEl.innerHTML = '';\n\n    anim.__dev.frames.forEach(frame => {\n      barsWrapperEl.appendChild(createBarEl(frame, inspectorOptions, shouldSkipFrame(status.currentTime, status.currentTimeIndex, frame)));\n    });\n\n    lineEl.update(status.currentTime);\n    lineEl.el.scrollIntoView({\n      behavior: 'auto',\n      inline: 'center',\n      block: 'center'\n    });\n    statusEl.update(status);\n  };\n\n  render();\n  rootEl.appendChild(statusEl.el);\n  rootEl.appendChild(seekEl);\n  rootEl.appendChild(barsWrapperEl);\n  rootEl.appendChild(lineEl.el);\n  document.body.appendChild(rootEl);\n};\n\nexport { inspector };\n","import {\n    cascade,\n    colorChain,\n    fromTo,\n    lightTrails,\n    SimpleTrailFunction,\n    trail,\n    val,\n    delay,\n    color,\n    parallel,\n    sequence,\n} from 'light-trails'\nimport { inspector } from 'light-trails-inspector'\n\nconst nextColor = colorChain('#FFFFFF')\n\nconst titleTrail = trail('h1', [\n    fromTo(\n        {\n            color: nextColor('#FF00F0'),\n            opacity: val(0, 1),\n        },\n        1000,\n    ),\n    fromTo({ color: nextColor('#00F0F0') }, 1000),\n])\n\nconst pTrail = trail('.top p', [\n    fromTo(\n        {\n            opacity: val(0, 1),\n            y: val(-10, 0, 'px'),\n        },\n        1000,\n    ),\n])\n\nconst mainTrail = trail('main', [delay(800), fromTo({ opacity: val(0, 1) }, 1000)])\n\nconst trailAnimations: SimpleTrailFunction[] = []\n\nconst leftVal = val(0, 100, '%')\n\nconst trialsCount = Math.round(window.innerWidth / 20)\n\nfor (let i = 0; i < trialsCount; i++) {\n    const el = document.createElement('span')\n    el.classList.add('trail')\n    el.style.left = leftVal(i / (trialsCount + 0.5 - Math.random())) as string\n\n    const size = Math.max(0.2, Math.random())\n\n    trailAnimations.push(\n        trail(el, [\n            fromTo(\n                {\n                    opacity: val(0, Math.min(size, 0.8)),\n                    y: val(0, window.innerHeight * Math.random(), 'px'),\n                    scale: val(0, size),\n                },\n                800,\n            ),\n        ]),\n    )\n\n    document.body.appendChild(el)\n}\n\ntrailAnimations.sort(() => 0.5 - Math.random())\n\nconst initAnimation = lightTrails(\n    parallel([\n        cascade(trailAnimations, {\n            offset: (i: number) => i * 30,\n        }),\n        sequence([\n            delay(1300),\n            cascade([titleTrail, pTrail, mainTrail], {\n                offset: (i: number) => i * 300,\n            }),\n        ]),\n    ]),\n)\n\ninitAnimation.play()\n\nconst colorVar = colorChain('#FF00F0')\n\nconst bodyColorTrial = trail('body', [\n    fromTo({ '--color': colorVar('#00F0F0') }, 1000),\n    fromTo({ '--color': colorVar('#FF00F0') }, 1000),\n])\n\nconst colorAnimation = lightTrails(bodyColorTrial)\n\ncolorAnimation.prepare()\nconst { total } = colorAnimation.getStatus()\n\nwindow.addEventListener('scroll', () => {\n    const { documentElement, body } = document\n\n    const percent =\n        (documentElement.scrollTop || body.scrollTop) /\n        ((documentElement.scrollHeight || body.scrollHeight) -\n            documentElement.clientHeight)\n    colorAnimation.seek(total * percent)\n})\n\nconst inspectorButton = document.querySelector<HTMLButtonElement>('#inspector')\n\nconst showInspector = () => {\n    inspector(initAnimation)\n    inspectorButton.hidden = true\n}\ninspectorButton.addEventListener('click', showInspector)\n"]}